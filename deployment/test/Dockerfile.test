FROM golang:latest

ARG BM_ROOT_DIR
ARG BM_SERVER_CONFIG
ARG BM_HTTP_CLIENT_CONFIG

ENV BM_ROOT_DIR=/app
ENV BM_SERVER_CONFIG=${BM_TEST_SERVER_CONFIG}
ENV BM_HTTP_CLIENT_CONFIG=${BM_TEST_HTTP_CLIENT_CONFIG}

WORKDIR /app

COPY . .

CMD ["go", "test", "./..."]
